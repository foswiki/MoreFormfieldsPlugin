"use strict";jQuery((function(e){var t={minimumInputLength:0,placeholder:"None",url:null,width:"element",multiple:!1,quietMillis:500,sortable:!1};function l(e){return e.text}e(".foswikiWebFieldEditor:not(.inited)").livequery((function(){var i=e(this),n=e.extend({},t,i.data()),o=e.extend({},n),r=i.val();delete o.minimumInputLength,delete o.url,delete o.width,delete o.quietMillis,delete o.valueText,i.addClass("inited").select2({allowClear:!0,dropdownCssClass:"ui-dialog",placeholder:n.placeholder,minimumInputLength:n.minimumInputLength,width:n.width,multiple:n.multiple,ajax:{url:n.url,dataType:"json",data:function(t,l){return e.extend({},{q:t,limit:10,page:l},o)},results:function(e,t){return e.more=10*t<e.total,e}},initSelection:function(t,l){var i,o;if(n.multiple)i=[],e(r.split(/\s*,\s*/)).each((function(e){o=n.valueText[this]||this;try{o=decodeURIComponent(o),i.push({id:this,text:o})}catch(e){console&&console.error("Error: illegal value in webfield:",o)}}));else{o=n.valueText;try{o=decodeURIComponent(o),i={id:r,text:o}}catch(e){console&&console.error("Error: illegal value in topicfield:",o)}}l(i)},formatResult:l,formatSelection:l}),n.sortable&&i.select2("container").find("ul.select2-choices").sortable({items:"> .select2-search-choice",start:function(){i.select2("onSortStart")},stop:function(){i.select2("onSortEnd")}})}))}));
